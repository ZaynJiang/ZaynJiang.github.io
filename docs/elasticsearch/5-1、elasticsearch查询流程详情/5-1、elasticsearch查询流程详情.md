## 1. 开头
&emsp;&emsp;上一篇介绍了elasticsearch的写入流程，了解了elasticsearch写入时的分布式特性的相关原理。elasticsearch作为一款具有强大搜索功能的存储引擎，它的查询是什么样的呢？在使用过程中有哪些需要我们注意的呢？  
&emsp;&emsp;在前面的文章我们已经知道elasticsearch的读取分为两种GET和SEARCH。这两种操作是有一定的差异的，下面我们分别对这两种核心的数据读取方式进行一一分析。

## 2. GET的流程
### 2.1 整体流程
![](get流程总览.png)  
图片来自官网  
以下是从主分片或者副本分片检索文档的步骤顺序：
（ 客户端向 Node 1 发送获取请求。
* 节点使用文档的 _id 来确定文档属于分片 0 。分片 0 的副本分片存在于所有的三个节点上。 在这种情况下，它将请求转发到 Node 2 。
* Node 2 将文档返回给 Node 1 ，然后将文档返回给客户端。  
  
&emsp;&emsp;在处理读取请求时，协调结点在每次请求的时候都会通过轮询所有的副本分片来达到负载均衡。  
&emsp;&emsp;在文档被检索时，已经被索引的文档可能已经存在于主分片上但是还没有复制到副本分片。 在这种情况下，副本分片可能会报告文档不存在，但是主分片可能成功返回文档。 一旦索引请求成功返回给用户，文档在主分片和副本分片都是可用的

### 2.3 整体流程

### 2.2 GET的详细流程
参考文档：https://zhuanlan.zhihu.com/p/34674517