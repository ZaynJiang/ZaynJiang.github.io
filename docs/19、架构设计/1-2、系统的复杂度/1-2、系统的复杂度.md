## 1. 概述  
&emsp;&emsp;之前的文章说过架构设计的主要目的是为了解决软件系统复杂度带来的问题。有前人已经总结了，复杂度的来源一共有6个：  
* 高性能
* 高可用
* 可扩展性
* 低成本
* 安全
* 规模


## 2. 高性能  
高性能是如何给系统带来复杂性的呢？主要体现在两个方面？
* 单台计算机为了提升性能带来的复杂度
* 多台计算机做成的服务集群带来的复杂性  

这些问题怎么讲呢？

### 2.1. 单台计算机的复杂度  
&emsp;&emsp;计算机内部复杂度最关键的地方就是操作系统，操作系统和性能最相关的就是进程和线程。  
&emsp;&emsp;单台计算机的复杂度是如何增加的呢？ 这其实是一个操作系统的发展史：  
* 最早的计算机其实是没有操作系统的,只有输入、计算和输出功能,性能非常低
* 批处理操作系统应运而生，先把要执行的指令预先写下来（写到纸带、磁带、磁盘等），形成一个指令清单，批处理操作系统负责读取“任务”中的指令清单并进行处理，一次只能执行一个任务，性能有进步但cpu还是有空余闲置的。
* 发明了“进程” ，采取了分时的方式，即把 CPU 的时间分成很多片段，每个片段只能执行某个进程中的指令
* 进程通讯被设计出来，包括管道、消息队列、信号量、共享存储等。
* 多进程之间内存不能共享，且进程还是串行的，人们又发明了线程，线程是进程内部的子任务，但这些子任务都共享同一份进程数据，同时互斥锁机制被引入了。
* 以上还是一个cpu在跑
* 多核cpu被引入，实现真正意义上的多任务并行  

&emsp;&emsp;从上面可以看出，仅仅要完成一个高性能的单机软件系统，就需要了解需要考虑如多进程、多线程、进程间通信、多线程并发等技术点。  
&emsp;&emsp;并不是最新的就是最好的，也不是非此即彼的选择。在做架构设计的时候，需要花费很大的精力来结合业务进行分析、判断、选择、组合，这个过程同样很复杂。比如Nginx 可以用多进程也可以用多线程，JBoss 采用的是多线程；Redis 采用的是单进程，Memcache 采用的是多线程。
