## 1. 开头
&emsp;&emsp;架构设计的主要目的是为了解决软件系统复杂度带来的问题，并分析了复杂度的来源。但是架构设计并没有像编程语言那样的语法来进行约束，更多的时候是面对多种可能性时进行选择。并没有一套通用的规范来指导架构师进行架构设计，更多是依赖架构师的经验和直觉。因此需要有一套原则来指导我们如何根据实际场景来指导架构设计，好在有经验的架构师总结下来一共有有这么几种原则：  
* 合适原则
* 简单原则
* 演化原则


## 2. 架构设计原则
### 2.1. 合适原则  
&emsp;&emsp;合适优于业界领先，怎么讲主要有三点因素： 
* 我们需要考虑现状，需要脚踏实地，没那么多人，却想干那么多活那是不可能的。   
* 没有那么多积累，却想一步登天,也是不可能的。 一个好的系统需要经历很多优化，调整，踩坑的。
* 没有那么卓越的业务场景，却幻想直接成功也不太可能。一个好的系统需要复杂的业务系统的检验的。  

真正优秀的架构都是在企业当前人力、条件、业务等各种约束下设计出来的，能够合理地将资源整合在一起并发挥出最大功效，并且能够快速落地  

### 2.2. 简单原则    
&emsp;&emsp;简单优于复杂。  
&emsp;&emsp;一个优秀的系统本身是非常的复杂的，比如zk，但是复杂并不是它优秀的原因，复杂是它的问题，但是系统设计者会不自觉地追求架构的复杂性。然而，“复杂”在制造领域代表先进，在建筑领域代表领先，但在软件领域，却恰恰相反，代表的是“问题”。  
&emsp;&emsp;软件领域的复杂性体现在两个方面：
* 结构的复杂性：
  * 组成复杂系统的组件数量更多；
  * 同时这些组件之间的关系也更加复杂  
  
  产生的问题：
  * 组件本身有一定概率出现故障，组件越多，那么会导致整个系统的故障率升高。
  * 某个组件改动，会影响关联的所有组件，这些被影响的组件同样会继续递归影响更多的组件，因为组件之间会有联系，这个问题会影响整个系统的开发效率，因为一旦变更涉及外部系统，需要协调各方统一进行方案评估、资源协调、上线配合  
  ![](组件复杂性.png)
  * 定位一个复杂系统中的问题总是比简单系统更加困难。首先是组件多，每个组件都有嫌疑，因此要逐一排查；其次组件间的关系复杂，有可能表现故障的组件并不是真正问题的根源
  
* 逻辑的复杂性：   
  &emsp;&emsp;一个组件内部如果逻辑很复杂，承担了太多的功能，会导致软件工程的每个环节都有问题：
  * 代码规模大，clone都很慢
  * 一行代码出错，整个组件凉凉
  * 开发效率慢，各种分支合并、各种分支覆盖
  * 产品、研发、测试、项目管理不停地开会讨论版本计划，协调资源，解决冲突
  * 版本太多，每天都要上线几十个版本，系统每隔 1 个小时重启一次
  * 线上运行出现故障，几十个人扑上去定位和处理  

    
  &emsp;&emsp;为什么会出现这种问题呢，最主要的是软件系统不像建筑工程，完工后一成不变，它需要不断的修改。是个动态的过程。  
     
  &emsp;&emsp;逻辑的复杂性还包括复杂的算法。复杂算法导致的问题主要是难以理解，进而导致难以实现、难以修改，并且出了问题难以快速解决。  

### 2.3. 演化原则  
演化优于一步到位  
&emsp; &emsp;这里再一次和建筑进行对比，建筑一旦完成（甚至一旦开建）就不可再变，而软件却需要根据业务的发展不断地变化。  
&emsp; &emsp;对于建筑来说，永恒是主题；而对于软件来说，变化才是主题.   
&emsp; &emsp;考虑到软件架构需要根据业务发展不断变化这个本质特点，软件架构设计其实更加类似于大自然“设计”一个生物，通过演化让生物适应环境，逐步变得更加强大:  
* 设计出来的架构要满足当时的业务需要
* 架构要不断地在实际应用过程中迭代，保留优秀的设计，修复有缺陷的设计，改正错误的设计，去掉无用的设计，使得架构逐渐完善
* 当业务发生变化时，架构要扩展、重构，甚至重写；代码也许会重写，但有价值的经验、教训、逻辑、设计等（类似生物体内的基因）却可以在新架构中延续  

这一点和生物的进化很像。  

**注意：架构师在进行架构设计时需要牢记这个原则，时刻提醒自己不要贪大求全，应该认真分析当前业务的特点，明确业务面临的主要问题，设计合理的架构，快速落地以满足业务需要，然后在运行过程中不断完善架构，不断随着业务演化架构，不管多牛的团队，也不可能完美预测所有的业务发展和变化路径下·**

### 2.4. 小结  
&emsp;&emsp;架构需要面向业务需求，并在各种资源（人、财、物、时、事）约束条件下去做权衡、取舍。而决策就会存在不确定性。采用一些高屋建瓴的设计原则有助于去消除不确定，去逼近解决问题的最优解。  
&emsp;&emsp;其中优先级为合适优于先进>演化优于一步到位>简单优于复杂，合适也就是适应当前需要是首位的，连当前需求都满足不了谈不到其他。架构整体发展是要不断演进的，在这个大前提下，尽量追求简单，但也有该复杂的时候，就要复杂，比如生物从单细胞一直演化到如今，复杂是避免不了的。 
* 合适原则  
  架构无优劣，但存合适性。“汝之蜜糖，吾之砒霜”；架构一定要匹配企业所在的业务阶段；不要面向简历去设计架构，高大上的架构不等于适用；削足适履与打肿充胖都不符合合适原则；所谓合适，一定要匹配业务所处阶段，能够合理地将资源整合在一起并发挥出最大功效，并能够快速落地。
* 简单原则  
  简单比复杂更加困难。面对系统结构、业务逻辑和复杂性，我们可以编写出复杂的系统，但在软件领域，复杂代表的是“问题”。架构设计时如果简单的方案和复杂的方案都可以满足需求，最好选择简单的方案。但是，事实上，当软件系统变得太复杂后，就会有人换一个思路进行重构、升级，将它重新变得简单，这也是软件开发的大趋势。 简单原则是一个朴素且伟大的原则，Google的MapReduce系统就采用了分而治之的思想，而背后就是将复杂问题转化为简单问题的典型案例 

* 演化原则  
  大到人类社会、自然生物，小到一个细胞，似乎都遵循这一普世原则，软件架构也不例外。业务在发展、技术在创新、外部环境在变化，这一切都是在告诫架构师不要贪大求全，或者盲目照搬大公司的做法。应该认真分析当前业务的特点，明确业务面临的主要问题，设计合理的架构，快速落地以满足业务需要，然后在运行过程中不断完善架构，不断随着业务演化架构。怀胎需要十月，早一月或晚一月都很危险。