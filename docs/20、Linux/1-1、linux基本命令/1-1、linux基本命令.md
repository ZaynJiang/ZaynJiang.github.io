## linux版本
* 内核版本
* 发行版本（Readhat、fedora）
* Centos版本，（deben、ubuntu版本）

## 目录结构

* /根目录
* /root root用户的家目录
* /home/username 普通用户的家目录
* /etc 配置文件目录
* /bin命令目录
* /sbin 管理命令目录
* /user/bin/user/sbin 系统预装的其它命令

**PS：**设计目录结构是要遵守一个  FHS（ Filesystem Hierarchy Standard） 约定的，即大家开发一个新的命令，该放在哪个目录，让使用的人看到后会更整洁； 按照规定 /usr/bin 放用户需要执行的命令  /usr/sbin放系统运行不必须的命令 。像是压缩、文件查找、客户端等程序都在/usr/bin 下面；服务端程序，用户管理等程序都在/usr/sbin下面 ，没有其他的含义

## 系统命令

### 开关机

* init 0

  0:   停机
  1：单用户形式，只root进行维护
  2：多用户，不能使用net file system
  3：完全多用户
  5：图形化
  6：重启

* 关机 
  shutdown -h 30  
  30分钟后，关闭

### 用户命令

root用户是#号

$普通用户

* exit
  退出用户
* su root
  切换用户

### whitch 

* whitch  命令名称 
  查找命令所在目录 

### ctrl+r

快速搜索之前出现的命令

## 帮助命令

### man

* man man

  查看man命令的帮助

* man ls

  查看ls命令的帮助

* man 数字

  数字 表示篇章。man来解释命令的时候可能会有多章的文本来解释。因为一个命令可能有重名的情况，比如man passwd可能是命令的passwd帮助，也可能是passwd配置文件帮助的帮助。

  1 用户指令
  2 系统调用
  3 程序库调用
  4 设备
  5 文本格式
  6 游戏
  7 杂项
  8 系统指令
  9 内核内部指令
  n tcl或者tk指令

  示例：

  man 7 man //表示man命令第7篇章
  man 5 passwd //表示passwd作为配置文件的帮助

  因为命令有可能会有重复的名称
  比如passwd，在etc下也有个文件passewd的命令，
  即可以指定查看的命令的类型，如果不知道类型可以使用man -a passwd
  一页页的查看

* man -a

  如果不知道这个命令是指令还是其它章节，可以使用-a,然后分页查看

  man -a passwd    //这个会分页查看和passwd相关的章节

### help

内部命令使用 help xxx 外部命令使用xxx  --help

* help cd

  内部指令

* ls --help

  外部指令

### type

**shell 命令解释器自带的命令成为内部命令，这种命令看不到它的实体，其他的看的到命令就是外部命令**

如何区分内部、外部命令： 举例：	

type cd  -> 	cd is a shell builtin  	cd是内部命令 

type ls   -> 	ls is hashed (/bin/ls)  	ls则是外部命令 

举例：	help cd		

### info

info命令比help更加详细，但是是英文的

## 文件命令

### cd

* cd /某目录    

  进入目录

* cd -   

  回到上一次操作的目录

* cd .. cd ../

### pwd

显示当前的目录名称

### ls

查看某个目录下的文件列表
可以查看多个目录 如 ls / /root
gun代表返回的格式

* ls -l 

  显示更详细的内容

  h可以M，G显示

* ls -a

  显示隐藏文件

* ls -r 

  默认文件名的逆向显示

* ls -r -t 

  按照时间的逆向显示
  可以简化书写 ls -lrt

* ls -R

  递归显示

* ls -d

  表示只查看当前目录

### mkdir

创建文件夹

* mkdir ./a

  相对路径创建目录

* mkdir /a  

  绝对路径创建文件夹

* 创建多级目录 
  mkdir -p /opt/a/b/c

### 删除文件（夹）

* rmdir /opt/a


   只能删除空目录

* rm -r /opt/a

  删除非空目录（需要确认）  

* 删除非空目录（不需要确认） 
  这个会逐级确认删除
  rm -r -f /opt/a 
  无需确认，直接删除，比较危险。

* rm 文件名

  r 删除目录(包含目录下的所有文件)

  `f` 删除文件不进行提示

### 复制移动
* cp -r source target 

  复制文件夹到另一个目录  

* cp source target 

  复制文件到另一个目录

  -v 是否显示进度条

  -p  保留用户、权限、时间等文件属性

  -a 等同于-dpR

* touch /f1

  创建一个空白的文件

* mv  source target

  改名或者移动文件或者文件夹  

* mv *  /opt 

  移动所有的文件（通配符），或者用文件名*

* mv 文件名？  /opt

  ？代表通配符匹配单个字符  

**PS：通配符**

通配符。操作多个相似(有简单规律)的文件

- `*`：匹配任何字符串
- `?`：匹配1个字符串
- `[xyz]`：匹配xyz任意一个字符
- `[a-z]`：匹配一个范围
- `[!xyz]`或`[^xyz]`：不匹配

### 文本查看
* cat 
  文本内容显示到终端

  -f 实时更新

* head 
  从文件的头部开始查看

* tail 
  查看文件结尾
  -f 可以实时的显示更新

* wc -l 
  统计文件内容信息

* more 
  分行显示

* less

  在more的基础上支持翻页等功能

### 打包压缩  
打包和压缩是两个软件

- `c` 打包
- `x` 解包
- `f` 指定操作类型为文件

示例如下：

* tar cf /xx/xx/xxxx.tar /某目录 
  为某目录进行打包

* tar czf /xx/xx/xxxx.tar.gz /某目录
  在打包的同时进行压缩，一般为了让别人知道是经过压缩的，会加上另一个后缀.gz， 

* 如果是通过bz2压缩的一般后缀为bz2，bz2有更高的压缩比率但是慢

* tar xf 解压文件位置 -C /文件的目录

  大写的C表示改变目录

  小写x是解压

  讲打包解压缩包文件到某目录下，解压的命令加上z

## 文本编辑器  

文本编辑器由4种模式

- 正常模式(Normal-mode)
- 插入模式(Insert-mode)
- 命令模式(Command-mode)
- 可视模式(Visual-mode)

### 正常模式

vim 直接命令模式进入

* hjkl 

  上下左右移动 

* y

  复制操作

  * yy 

    复制一行

  * p 

    粘贴复制内容

  * 3yy 

    复制3行

  * y$ 
    复制到光标结尾的内容 

* d

  剪切操作

  * dd 

    剪切当前行

  * 3dd 
    剪切三行  

  * d$

    剪切到光标结尾的命令 

* u 
  撤销 

  * ctrl u 
    撤销重做  

  * ctrl r

    反撤销操作

* x 
  光标移动到某字符，然后删除   

* r

  对当前字符替换

* g

  跳转到第1行

* G

  跳转到最后一行

* 100g

  跳转到第100行

* ^

  跳转到当前行的开头

* $

  跳转到当前行的结尾

* i 
  进入插入模式 
* esc 
  退出插入模式


### 命令模式

命令模式也叫末行模式，可以查找也可用于保存、退出、替换、修改

* ： 
  使用esc推出插入模式后，使用：进入该模式 

* w 

  保存 空格可以添加保存的文件名

  比如：w a.txt 

* q 
  退出 

* wq 
  保存退出 

* ! 
  可以临时执行linux的其它命令，比如!ipconfig可以临时查看ip地址  

/ 可以进入查找模式

* / xxx 
  查找xxx字符，如果有多个相同的字符，可以按n查找下一个，上一个shift n 

* :s /旧的字符/新的字符 
  可以针对查找的某个字符进行替换，**这个只针对光标所在的行中的字符替换** 

  加上g代表一行

* %s /旧字符/新字符 
  整个文档每一行的字符替换，多个不替换 

* %s/旧字符/新字符/g 
  整个文档的所有字符都替换 

* 3，5s/旧字符/新字符/g 
  3到5行之间替换 

* :set nu 
  显示行数，然后输入数字，G可以迅速移动到某行，输入g可以直接移动到第一行，G可以直接最后一行
  ^一行的结尾，$一行的开头

  当前操作有效

* :set nonu

  不显示行号(当前操作有效)

### 可视模式 

可以选择一块编辑区域，然后对选中的文件内容执行`插入`、`删除`、`替换`、`改变大小写`等操作

字符选择模式: 选中光标经过的所有**字符**，普通模式下按**小写 `v`** 进入
行选择模式：选中光标经过的所有**行**，普通模式下按 **大写`V`** 进入
块选择模式：选中一整个矩形框表示的所有文本，普通模式下按 `<Ctrl> + v` 进入

* v 
  字符可视化

* V 
  行可视行模式 

* ctrl+v 

  块可视模式(先选择在操作)

  配合d（删除）和i、I（每一行可以同步新增某字符）可以块模式操作

  Vim同时编辑多行时，只有在当前的插入动作**结束后**(按`Esc`退为命令模式)，之前选中的其它行才会出现同样插入的文本

### vim配置 

vim /etc/vimrc  set nu 
修改所有的编辑器都是有行号的，进入这个文件，set nu然后保存就可以使其他的打开文件都是num模式

##  用户和权限命令

只有root用户才能创建新用户

### 用户命令

用户配置相关的文件在

- `/etc/passwd`：其中每行的`x`代表该用户登录需要密码(删除则不需要)
- `/etc/shadow`：保存用户和用户密码(加密后)
- `/etc/group`：组名，是否密码验证，组id，其他组

常见的命令为：

* uuseradd 用户名  

  新建用户。如果没有指定组，则会创建一个同名的组

  添加一个用户会在`/etc/passwd`、`/etc/shadow`内进行新增信息

  useradd -g 组名 用户名 
  新建用户时，直接将用户添加到某一组

* id 用户名 
   查看某用户的信息.

   root用户特权：可以访问系统配置文件，可以访问普通用户的家目录。
   可以通过`id`命令来检测用户是否存在：

* passwd  用户名 

修改用户密码  

 修改指定密码，不输入用户名就是修改自己的密码

* userdel 用户名  

  删除某用户，增加-r选项，同时删除用户目录

* usermod -d 路径 用户名 

  修改用户属性(可以修改用户组信息)

  修改一个用户账户 
  修改一个用户的家目录

  usermod -g 组名 用户名  
  将某用户添加到某一组  

* chage

  修改用户属性
  修改用户的生命周期  

* 切换用户 
   su - 用户名 
   加-直接到家目录 ，不加回到环境目录

### sudo命令 

以系统管理者的身份执行指令，也就是说，经由 sudo 所执行的指令就好像是 root 亲自执行

visudo设置需要使用sudo的用户(组) ，进行配置

设置方法：

 visudo 
 进入sudo的修改文件 
 添加： 用户名 ALL=命令路径
 保存成功后，即可使得普通用户sudo一个命令授权给他 

### 用户组命令

* groupadd 组名

  新建用户组 

* groupdel

  删除用户组

* usermod -g group1 user1

  更改存在的用户组信息

  将用户(组)user1改为group1

* useradd -g group1 user2

  新建用户时指定组信息

### 文件权限

使用ls -ld /test看到权限

```
-rw-r-xr-- 1 username groupname mtime filename
```

权限的含义如下：

- rw-：文件属主的权限
- r-x：文件属组的权限
- r–：其他用户的权限

权限设置方法：

* 创建新文件有默认权限，根据umask值计算，属主和属组根据当前进程的用户来设定

  模拟人权限-rw-r--r--

- chmod可以更改u、g、o、a四个维度的权限
- 增加权限+、减少权限-、设置权限=

**PS：root用户不受权限控制**

**权限命令如下**

#### chmod

修改文件、目录权限

* chmod u+x afile 

  属主增加执行权限

* chmod g-r afile 

  属组减少读权限

* chmod o=w afile

  更改其他用户只有读权限(会覆盖其他权限)

* chmod a+r afile 

  更改每个位置都是读权限(a = u g o)

* chmod 446 afile

  用数字表示用户权限

* chmod 644 afile

  创建文件的默认权限*

* chmod u+x /tmp/testfile
* chmod 755 /tmp/testfile

**PS:权限编码示例为：**

**755**

**7： 4+2+1 rwx   所有者具有读取、写入、执行权限；**

**5: 4+0+1  r-x   同组用户具有读取、执行权限但没有写入权限；**

**5: 4+0+1  r-x   其他用户具有读取、执行权限但没有写入权限；**

#### chown

更改属主、属组

* chown user /test 

   更改属主

* chown :group1 /test 

  更改属组

#### chgrp

可以单独更改属组，不常用

* chgrp user3 /test 

  改属组

#### 特殊权限

- SUID

  用于二进制可执行文件，执行命令时取得文件属主权限。让普通用户临时拥有该文件的属主的执行权限，suid权限只能应用在二进制可执行文件（命令）上，而且suid权限只能设置在属主位置上。

  如/usr/bin/passwd

  只要用户对设有uid的文件有执行权限，那么当用户执行此文件时，就会以该文件属主的用户身份去执行此文件；当执行文件后，身份的切换也会随之消失

- SGID

  用于目录，在该目录下创建新的文件和目录，权限自动更改为目录的属组

- SBIT

  用于目录，该目录下新建的文件和目录，仅root和自己可以删除

  如/tmp

命令示例：

* chmod 4xxx /test/bfile

  添加SUID权限

  注意xxx为原有权限

  0表示去除

  或者使用u+s，u-s

* chmod 1xxx /test

  注意xxx为原有权限

